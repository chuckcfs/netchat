
var __cov_b6dAEze68EyxDVtEl6aK8w = (Function('return this'))();
if (!__cov_b6dAEze68EyxDVtEl6aK8w.__coverage__) { __cov_b6dAEze68EyxDVtEl6aK8w.__coverage__ = {}; }
__cov_b6dAEze68EyxDVtEl6aK8w = __cov_b6dAEze68EyxDVtEl6aK8w.__coverage__;
if (!(__cov_b6dAEze68EyxDVtEl6aK8w['app/js/chat/ChatDetails.js'])) {
   __cov_b6dAEze68EyxDVtEl6aK8w['app/js/chat/ChatDetails.js'] = {"path":"app/js/chat/ChatDetails.js","s":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0,"11":0,"12":0,"13":0,"14":0,"15":0,"16":0,"17":0,"18":0,"19":0,"20":0,"21":0,"22":0,"23":0,"24":0,"25":0,"26":0,"27":0,"28":0,"29":0,"30":0,"31":0,"32":0,"33":0,"34":0,"35":0,"36":0},"b":{"1":[0,0],"2":[0,0],"3":[0,0],"4":[0,0],"5":[0,0]},"f":{"1":0,"2":0,"3":0,"4":0,"5":0,"6":0,"7":0,"8":0,"9":0,"10":0},"fnMap":{"1":{"name":"(anonymous_1)","line":1,"loc":{"start":{"line":1,"column":8},"end":{"line":1,"column":29}}},"2":{"name":"(anonymous_2)","line":4,"loc":{"start":{"line":4,"column":11},"end":{"line":4,"column":83}}},"3":{"name":"(anonymous_3)","line":15,"loc":{"start":{"line":15,"column":30},"end":{"line":15,"column":51}}},"4":{"name":"(anonymous_4)","line":20,"loc":{"start":{"line":20,"column":21},"end":{"line":20,"column":33}}},"5":{"name":"(anonymous_5)","line":48,"loc":{"start":{"line":48,"column":30},"end":{"line":48,"column":42}}},"6":{"name":"(anonymous_6)","line":70,"loc":{"start":{"line":70,"column":38},"end":{"line":70,"column":59}}},"7":{"name":"(anonymous_7)","line":73,"loc":{"start":{"line":73,"column":42},"end":{"line":73,"column":63}}},"8":{"name":"(anonymous_8)","line":78,"loc":{"start":{"line":78,"column":39},"end":{"line":78,"column":60}}},"9":{"name":"(anonymous_9)","line":86,"loc":{"start":{"line":86,"column":40},"end":{"line":86,"column":64}}},"10":{"name":"(anonymous_10)","line":91,"loc":{"start":{"line":91,"column":39},"end":{"line":91,"column":51}}}},"statementMap":{"1":{"start":{"line":1,"column":0},"end":{"line":95,"column":3}},"2":{"start":{"line":4,"column":4},"end":{"line":94,"column":6}},"3":{"start":{"line":5,"column":8},"end":{"line":18,"column":14}},"4":{"start":{"line":16,"column":16},"end":{"line":16,"column":55}},"5":{"start":{"line":17,"column":16},"end":{"line":17,"column":41}},"6":{"start":{"line":20,"column":8},"end":{"line":27,"column":11}},"7":{"start":{"line":21,"column":12},"end":{"line":26,"column":13}},"8":{"start":{"line":22,"column":16},"end":{"line":25,"column":17}},"9":{"start":{"line":23,"column":20},"end":{"line":23,"column":33}},"10":{"start":{"line":24,"column":20},"end":{"line":24,"column":43}},"11":{"start":{"line":29,"column":8},"end":{"line":29,"column":35}},"12":{"start":{"line":30,"column":8},"end":{"line":39,"column":10}},"13":{"start":{"line":40,"column":8},"end":{"line":40,"column":48}},"14":{"start":{"line":41,"column":8},"end":{"line":41,"column":50}},"15":{"start":{"line":42,"column":8},"end":{"line":42,"column":38}},"16":{"start":{"line":43,"column":8},"end":{"line":43,"column":48}},"17":{"start":{"line":45,"column":8},"end":{"line":45,"column":36}},"18":{"start":{"line":46,"column":8},"end":{"line":46,"column":31}},"19":{"start":{"line":48,"column":8},"end":{"line":68,"column":10}},"20":{"start":{"line":49,"column":12},"end":{"line":59,"column":18}},"21":{"start":{"line":61,"column":12},"end":{"line":67,"column":15}},"22":{"start":{"line":70,"column":8},"end":{"line":72,"column":11}},"23":{"start":{"line":71,"column":12},"end":{"line":71,"column":31}},"24":{"start":{"line":73,"column":8},"end":{"line":77,"column":11}},"25":{"start":{"line":74,"column":12},"end":{"line":76,"column":13}},"26":{"start":{"line":75,"column":16},"end":{"line":75,"column":51}},"27":{"start":{"line":78,"column":8},"end":{"line":84,"column":11}},"28":{"start":{"line":79,"column":12},"end":{"line":79,"column":37}},"29":{"start":{"line":80,"column":12},"end":{"line":80,"column":41}},"30":{"start":{"line":81,"column":12},"end":{"line":83,"column":13}},"31":{"start":{"line":82,"column":16},"end":{"line":82,"column":24}},"32":{"start":{"line":86,"column":8},"end":{"line":90,"column":11}},"33":{"start":{"line":87,"column":12},"end":{"line":89,"column":13}},"34":{"start":{"line":88,"column":16},"end":{"line":88,"column":48}},"35":{"start":{"line":91,"column":8},"end":{"line":93,"column":11}},"36":{"start":{"line":92,"column":12},"end":{"line":92,"column":51}}},"branchMap":{"1":{"line":21,"type":"if","locations":[{"start":{"line":21,"column":12},"end":{"line":21,"column":12}},{"start":{"line":21,"column":12},"end":{"line":21,"column":12}}]},"2":{"line":22,"type":"if","locations":[{"start":{"line":22,"column":16},"end":{"line":22,"column":16}},{"start":{"line":22,"column":16},"end":{"line":22,"column":16}}]},"3":{"line":53,"type":"cond-expr","locations":[{"start":{"line":53,"column":71},"end":{"line":56,"column":17}},{"start":{"line":56,"column":20},"end":{"line":59,"column":17}}]},"4":{"line":81,"type":"if","locations":[{"start":{"line":81,"column":12},"end":{"line":81,"column":12}},{"start":{"line":81,"column":12},"end":{"line":81,"column":12}}]},"5":{"line":87,"type":"if","locations":[{"start":{"line":87,"column":12},"end":{"line":87,"column":12}},{"start":{"line":87,"column":12},"end":{"line":87,"column":12}}]}}};
}
__cov_b6dAEze68EyxDVtEl6aK8w = __cov_b6dAEze68EyxDVtEl6aK8w['app/js/chat/ChatDetails.js'];
__cov_b6dAEze68EyxDVtEl6aK8w.s['1']++;define(function(require){'use strict';__cov_b6dAEze68EyxDVtEl6aK8w.f['1']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['2']++;return function($scope,$stateParams,config,Chat,Message,Session,Sign){__cov_b6dAEze68EyxDVtEl6aK8w.f['2']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['3']++;var list=$('#messages-list'),query={filters:{chat_id:$stateParams.id},limit:10,order:'DESC',page:1},close=null,attachUploaded=function(e,data){__cov_b6dAEze68EyxDVtEl6aK8w.f['3']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['4']++;$scope.attachment=data.result.file;__cov_b6dAEze68EyxDVtEl6aK8w.s['5']++;close=data.close;};__cov_b6dAEze68EyxDVtEl6aK8w.s['6']++;list.scroll(function(){__cov_b6dAEze68EyxDVtEl6aK8w.f['4']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['7']++;if(list.scrollTop()==0){__cov_b6dAEze68EyxDVtEl6aK8w.b['1'][0]++;__cov_b6dAEze68EyxDVtEl6aK8w.s['8']++;if(Message.getTotal()>$scope.messages.length){__cov_b6dAEze68EyxDVtEl6aK8w.b['2'][0]++;__cov_b6dAEze68EyxDVtEl6aK8w.s['9']++;query.page++;__cov_b6dAEze68EyxDVtEl6aK8w.s['10']++;Message.query(query);}else{__cov_b6dAEze68EyxDVtEl6aK8w.b['2'][1]++;}}else{__cov_b6dAEze68EyxDVtEl6aK8w.b['1'][1]++;}});__cov_b6dAEze68EyxDVtEl6aK8w.s['11']++;$scope.attachment=null;__cov_b6dAEze68EyxDVtEl6aK8w.s['12']++;$scope.config={done:attachUploaded,fileName:'file',fileTypes:/(\.|\/)(jpg|png|jpeg)$/i,requestSign:Sign.sign,session:Session.getSession(),sequentialUploads:true,url:config.api_url+'messages/file',validateType:true};__cov_b6dAEze68EyxDVtEl6aK8w.s['13']++;$scope.file_url=config.static_url;__cov_b6dAEze68EyxDVtEl6aK8w.s['14']++;$scope.user_id=Session.getUserId();__cov_b6dAEze68EyxDVtEl6aK8w.s['15']++;$scope.messages=Array();__cov_b6dAEze68EyxDVtEl6aK8w.s['16']++;$scope.s3_uploads=config.s3_uploads;__cov_b6dAEze68EyxDVtEl6aK8w.s['17']++;Chat.get($stateParams.id);__cov_b6dAEze68EyxDVtEl6aK8w.s['18']++;Message.query(query);__cov_b6dAEze68EyxDVtEl6aK8w.s['19']++;$scope.send=function(){__cov_b6dAEze68EyxDVtEl6aK8w.f['5']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['20']++;var from={_id:$scope.user_id,name:$scope.user},to=$scope.chat.from._id==$scope.user_id?(__cov_b6dAEze68EyxDVtEl6aK8w.b['3'][0]++,{_id:$scope.chat.to._id,name:$scope.chat.to.name}):(__cov_b6dAEze68EyxDVtEl6aK8w.b['3'][1]++,{_id:$scope.chat.from._id,name:$scope.chat.from.name});__cov_b6dAEze68EyxDVtEl6aK8w.s['21']++;Message.create({attachment:$scope.attachment,chat:$stateParams.id,content:$scope.newMessage,from:from,to:to});};__cov_b6dAEze68EyxDVtEl6aK8w.s['22']++;$scope.$on('CHAT_RETRIEVED',function(e,data){__cov_b6dAEze68EyxDVtEl6aK8w.f['6']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['23']++;$scope.chat=data;});__cov_b6dAEze68EyxDVtEl6aK8w.s['24']++;$scope.$on('MESSAGES_RETRIEVED',function(e,data){__cov_b6dAEze68EyxDVtEl6aK8w.f['7']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['25']++;for(var i=0;i<data.length;i++){__cov_b6dAEze68EyxDVtEl6aK8w.s['26']++;$scope.messages.unshift(data[i]);}});__cov_b6dAEze68EyxDVtEl6aK8w.s['27']++;$scope.$on('MESSAGE_CREATED',function(e,data){__cov_b6dAEze68EyxDVtEl6aK8w.f['8']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['28']++;$scope.newMessage='';__cov_b6dAEze68EyxDVtEl6aK8w.s['29']++;$scope.messages.push(data);__cov_b6dAEze68EyxDVtEl6aK8w.s['30']++;if(close){__cov_b6dAEze68EyxDVtEl6aK8w.b['4'][0]++;__cov_b6dAEze68EyxDVtEl6aK8w.s['31']++;close();}else{__cov_b6dAEze68EyxDVtEl6aK8w.b['4'][1]++;}});__cov_b6dAEze68EyxDVtEl6aK8w.s['32']++;$scope.$on('message:received',function(e,message){__cov_b6dAEze68EyxDVtEl6aK8w.f['9']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['33']++;if(message.chat_id==$stateParams.id){__cov_b6dAEze68EyxDVtEl6aK8w.b['5'][0]++;__cov_b6dAEze68EyxDVtEl6aK8w.s['34']++;$scope.messages.push(message);}else{__cov_b6dAEze68EyxDVtEl6aK8w.b['5'][1]++;}});__cov_b6dAEze68EyxDVtEl6aK8w.s['35']++;$scope.$on('render:finished',function(){__cov_b6dAEze68EyxDVtEl6aK8w.f['10']++;__cov_b6dAEze68EyxDVtEl6aK8w.s['36']++;list.scrollTop(list[0].scrollHeight);});};});
